 ﻿<UserControl x:Class="Ferreteria_Proyecto_WPF.Views.ClientesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Ferreteria_Proyecto_WPF.ViewModels"
             xmlns:fa="clr-namespace:FontAwesome.Sharp;assembly=FontAwesome.Sharp">

    <UserControl.DataContext>
        <vm:ClientesViewModel />
    </UserControl.DataContext>

    <Grid Background="#F8F8F8" Margin="20">
        <StackPanel Orientation="Vertical">

            <!-- Título -->
            <TextBlock Text="Gestión de Clientes"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="#2C3E50"
                       Margin="0 0 0 20"/>

            <!-- Contenedor con fondo blanco -->
            <Border Background="White"
                    Padding="20"
                    CornerRadius="10"
                    BorderBrush="#DDD"
                    BorderThickness="1">

                <StackPanel Orientation="Vertical" >

                    <!-- Buscador + Botón -->
                    <DockPanel Margin="0 0 15 20">
                        <TextBox Width="300"
                                 Height="35"
                                 DockPanel.Dock="Left"
                                 Margin="0 0 10 0"
                                 Text="{Binding Busqueda, UpdateSourceTrigger=PropertyChanged}"
                                 VerticalContentAlignment="Center"
                                 FontSize="14"
                                 Padding="8"
                                 BorderBrush="#CCC"/>

                        <Button Content="➕ Nuevo Cliente"
                                Command="{Binding AgregarCommand}"
                                Background="#007BFF"
                                Foreground="White"
                                Padding="10,5"
                                FontWeight="SemiBold"
                                FontSize="14"
                                BorderThickness="0"
                                Width="160"
                                Height="35"
                                Cursor="Hand"
                                HorizontalAlignment="Right"/>
                    </DockPanel>

                    <!-- Tabla moderna -->
                    <DataGrid ItemsSource="{Binding ClientesFiltrados}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              HeadersVisibility="Column"
                              RowHeight="38"
                              FontSize="14"
                              GridLinesVisibility="None"
                              IsReadOnly="True"
                              BorderThickness="0"
                              RowBackground="White"
                              AlternatingRowBackground="#FAFAFA"
                              Margin="0">

                        <DataGrid.Resources>
                            <!-- Estilo header -->
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Background" Value="#F0F0F0"/>
                                <Setter Property="Padding" Value="10"/>
                                <Setter Property="BorderBrush" Value="#DDD"/>
                                <Setter Property="BorderThickness" Value="0 0 0 1"/>
                            </Style>
                        </DataGrid.Resources>

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding ClienteId}" Width="50"/>
                            <DataGridTextColumn Header="Nombre" Binding="{Binding Nombre}" Width="150"/>
                            <DataGridTextColumn Header="Apellido" Binding="{Binding Apellido}" Width="150"/>
                            <DataGridTextColumn Header="Cédula" Binding="{Binding Cedula}" Width="100"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding CorreoElectronico}" Width="200"/>
                            <DataGridTextColumn Header="Provincia" Binding="{Binding ProvinciaNombre}" Width="150"/>
                            <DataGridTextColumn Header="Ciudad" Binding="{Binding CiudadNombre}" Width="150"/>
                            <DataGridTemplateColumn Header="Acciones" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Button Content="✏️"
                                                    Command="{Binding DataContext.EditarCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                    CommandParameter="{Binding}"
                                                    Margin="2"
                                                    Width="30"
                                                    Height="30"
                                                    Background="#E3F2FD"
                                                    BorderBrush="#90CAF9"
                                                    Cursor="Hand"/>
                                            <Button Content="🗑️"
                                                    Command="{Binding DataContext.EliminarCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                    CommandParameter="{Binding}"
                                                    Margin="2"
                                                    Width="30"
                                                    Height="30"
                                                    Background="#FFEBEE"
                                                    BorderBrush="#EF9A9A"
                                                    Cursor="Hand"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>