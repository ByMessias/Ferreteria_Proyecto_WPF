<Window x:Class="Ferreteria_Proyecto_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:Ferreteria_Proyecto_WPF.Views"
        Title="Ferretería" Height="720" Width="1100"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent" ResizeMode="CanResize">

    <!--
      Requisitos:
      - App.xaml debe tener merged:
          /Themes/LightTheme.xaml (o Dark)
          /Styles/RadioButtonStyle.xaml
          /Styles/ButtonStyle.xaml
          /Assets/Icons/Icons.xaml  (contiene home, users, collections, analytics, messages, settings, sun, moon, minimize, maximize, restore, close)
    -->

    <Border CornerRadius="12" Background="{DynamicResource PrimaryBackgroundColor}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="72"/>
                <!-- HEADER -->
                <RowDefinition Height="*"/>
                <!-- CONTENT -->
            </Grid.RowDefinitions>

            <!-- ============ SIDEBAR ============ -->
            <Border Grid.RowSpan="2"
                    CornerRadius="12 0 0 12"
                    Background="{DynamicResource SecundaryBackgroundColor}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="120"/>
                        <!-- Logo -->
                        <RowDefinition Height="*"/>
                        <!-- Menú -->
                        <RowDefinition Height="90"/>
                        <!-- Toggle tema -->
                    </Grid.RowDefinitions>

                    <!-- LOGO CENTRADO -->
                    <Grid Grid.Row="0">
                        <Image Source="/Assets/Icons/Logo.png"
                               Width="120" Height="120"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    </Grid>

                    <!-- MENÚ (usa geometrías en Tag) -->
                    <StackPanel Grid.Row="1" Margin="8,6">
                        <RadioButton Content="Dashboard"    Tag="{StaticResource home}"        Style="{DynamicResource MenuRadioButtonStyle}" Click="Dashboard_Click"/>
                        <RadioButton Content="Clientes"     Tag="{StaticResource users}"       Style="{DynamicResource MenuRadioButtonStyle}" Click="Clientes_Click"/>
                        <RadioButton Content="Productos"    Tag="{StaticResource collections}" Style="{DynamicResource MenuRadioButtonStyle}" Click="Productos_Click"/>
                        <RadioButton Content="Facturación"  Tag="{StaticResource analytics}"   Style="{DynamicResource MenuRadioButtonStyle}" Click="Facturacion_Click"/>
                        <RadioButton Content="Reportes"     Tag="{StaticResource messages}"    Style="{DynamicResource MenuRadioButtonStyle}" Click="Reportes_Click"/>

                        <Separator Margin="12,16" Background="{DynamicResource TertiaryBackgroundColor}"/>

                        <RadioButton Content="Configuración" Tag="{StaticResource settings}"   Style="{DynamicResource MenuRadioButtonStyle}"/>
                    </StackPanel>

                    <!-- TOGGLE TEMA -->
                    <Border Grid.Row="2"
                            CornerRadius="18" Width="140" Height="38"
                            Background="{DynamicResource TertiaryBackgroundColor}"
                            HorizontalAlignment="Center" VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10,0">
                            <Path Data="{StaticResource sun}"  Width="16" Height="16"
                                  Fill="{DynamicResource PrimaryYellowColor}" VerticalAlignment="Center"/>
                            <ToggleButton x:Name="ThemesToggle" Style="{DynamicResource ToggleButtonStyle}"
                                          Click="ThemesToggle_Click" Margin="10,0"/>
                            <Path Data="{StaticResource moon}" Width="16" Height="16"
                                  Fill="{DynamicResource PrimaryWhiteColor}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- ============ HEADER ============ -->
            <Border Grid.Column="1" Grid.Row="0"
                    CornerRadius="0 16 16 0"
                    Background="{DynamicResource PrimaryBackgroundColor}"
                    BorderBrush="{DynamicResource TertiaryBackgroundColor}"
                    BorderThickness="0,0,0,1"
                    Padding="10,0">
                <!-- Título | Usuario | Botones ventana -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <!-- Título -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Usuario -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Ventana -->
                    </Grid.ColumnDefinitions>

                    <!-- TÍTULO DEL MÓDULO -->
                    <TextBlock x:Name="TituloModulo"
                               Grid.Column="0"
                               Text="Dashboard"
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource PrimaryTextColor}"
                               VerticalAlignment="Center"/>

                    <!-- INFO DE USUARIO -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,12,0">
                        <Path Data="{StaticResource users}" Width="16" Height="16"
                              Fill="{DynamicResource SecundaryTextColor}"
                              VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <TextBlock Text="Usuario Admin"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource SecundaryTextColor}"/>
                    </StackPanel>

                    <!-- BOTONES DE VENTANA -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Minimizar -->
                        <Button x:Name="btnMinimize"
                                Style="{DynamicResource IconButtonsStyle}"
                                Content="{DynamicResource minimize}"
                                Click="Minimize_Click"/>

                        <!-- Max / Restore (cambia icono según WindowState) -->
                        <Button x:Name="btnRestore" Margin="6,0" Click="Restore_Click">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource IconButtonsStyle}">
                                    <Setter Property="Content" Value="{DynamicResource maximize}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                            <Setter Property="Content" Value="{DynamicResource restore}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- Cerrar (hover rojo por IconButtonsStyle + Tag) -->
                        <Button x:Name="btnClose"
                                Style="{DynamicResource IconButtonsStyle}"
                                Content="{DynamicResource close}"
                                Tag="IsCloseButton"
                                Margin="6,0"
                                Click="Close_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ============ CONTENIDO ============ -->
            <Border Grid.Column="1" Grid.Row="1"
                    CornerRadius="0 0 12 0"
                    Background="Transparent">
                <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" Margin="12"/>
            </Border>
        </Grid>
    </Border>
</Window>
